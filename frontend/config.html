<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="referrer" content="no-referrer">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name=viewport
        content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
    <title>åœ¨çº¿æ–‡æœ¬ç»Ÿè®¡ã€ç¼–è¾‘ä¸ä¼˜åŒ–ç¥å™¨ - åå°é…ç½®</title>
    <script src="https://unpkg.onmicrosoft.cn/vue@2/dist/vue.js"></script>
    <script src="https://unpkg.onmicrosoft.cn/element-ui@2.15.10/lib/index.js"></script>
    <script src="https://unpkg.onmicrosoft.cn/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.onmicrosoft.cn/element-ui@2.15.10/lib/theme-chalk/index.css" />
    <script>
        var API_CONFIG = "/api"
    </script>
    <style>
        #app {
            margin: 10px;
            margin-top: 80px;
        }

        .v-center {
            margin: 0;
            text-align: center;
        }


        .box-card {
            margin: 20px;
        }

        .box-card {
            max-width: 550px;
            margin: 15px auto;
        }

        .el-form-item:first-child {
            padding-top: 20px;
        }

        .el-form-item:last-child {
            padding-bottom: 30px;
        }

        .el-form-item {
            margin-bottom: 8px;
        }

        .el-form-item__content {
            padding-left: 10px;
        }

        .text_center {
            text-align: center;
        }
    </style>
</head>

<body>


    <div id="app">
        <el-card class="box-card">
            <div slot="header" class="text_center">
                <span>åœ¨çº¿æ–‡æœ¬ç»Ÿè®¡ã€ç¼–è¾‘ä¸ä¼˜åŒ–ç¥å™¨ - åå°é…ç½®</span>
            </div>

            <el-alert title="æ‚¨å¥½ ğŸ‘‹ æ¬¢è¿ä½¿ç”¨è¯¥ç³»ç»Ÿ è¯·å¡«å†™ä¿¡æ¯æŸ¥è¯¢" type="success" :closable="false" show-icon center>
            </el-alert>

            <el-form ref="form" :model="form" label-width="80px">
                <el-form-item :rules="[
      { required: true, message: 'è¯·è¾“å…¥å¯†ç ', trigger: 'blur' },    ]" aria-required="" label="å¯†ç ">
                    <el-input placeholder="å¿…å¡«" v-model="form.password"></el-input>
                </el-form-item>


                <el-form-item>
                    <center>
                        <el-button type="primary" @click="GetData">ç«‹å³æŸ¥è¯¢</el-button>
                    </center>
                </el-form-item>

                <el-form-item label="api_config">
                    <el-input placeholder="" v-model="form.api_config"></el-input>
                </el-form-item>

                <el-form-item label="key">
                    <el-input placeholder="" v-model="form.key"></el-input>
                </el-form-item>
             
                <el-form-item label="prefix">
                    <el-input placeholder="" v-model="form.prefix"></el-input>
                </el-form-item>

                <el-form-item label="model">
                    <el-input placeholder="" v-model="form.model"></el-input>
                </el-form-item>
                
                <el-form-item>
                    <center>
                        <el-button type="primary" @click="PutData">æäº¤/æ›´æ–°</el-button>
                    </center>
                </el-form-item>
            </el-form>


        </el-card>

        <!-- {{ClassMate}} -->
    </div>
    <script>

        var Main = {
            data() {
                return {
                    form: {
                        password: "",
                        key: "",
                        api_config: "",
                        prefix: "",
                        model: ""
                    },
                }
            },
            methods: {
                GetData() {
                    this.$notify({
                        title: 'æ­£åœ¨æŸ¥è¯¢',
                        message: 'æ­£åœ¨è¯·æ±‚æ¥å£, è¯·ç¨å....',
                        type: 'success' // å¯ä»¥æ˜¯ 'success', 'warning', 'info', 'error'
                    });
                    axios.post(API_CONFIG + '/info', {
                        password: this.form.password,
                    })
                        .then(({ data }) => {
                            console.log(data);
                            if (data.msg) {
                                this.$notify({
                                    title: data.msg,
                                    message: data.detail,
                                    type: 'error' // å¯ä»¥æ˜¯ 'success', 'warning', 'info', 'error'
                                });
                            } else {
                                this.$notify({
                                    title: 'æŸ¥è¯¢æˆåŠŸ',
                                    message: 'è¯·åœ¨ä¸‹æ–¹æŸ¥çœ‹å…·ä½“ä¿¡æ¯.',
                                    type: 'success' // å¯ä»¥æ˜¯ 'success', 'warning', 'info', 'error'
                                });
                                this.form.key = data.key;
                                this.form.api_config = data.api_config;
                                this.form.prefix = data.prefix;
                                this.form.model = data.model;
                            }
                        })
                        .catch(function (error) {
                            console.log(error);
                        });
                },
                PutData(){
                    this.$notify({
                        title: 'æ­£åœ¨æäº¤',
                        message: 'æ­£åœ¨è¯·æ±‚æ¥å£, è¯·ç¨å....',
                        type: 'success' // å¯ä»¥æ˜¯ 'success', 'warning', 'info', 'error'
                    });
                    axios.put(API_CONFIG + '/info', {
                        password: this.form.password,
                        key: this.form.key,
                        api_config: this.form.api_config,
                        prefix: this.form.prefix,
                        model: this.form.model
                    })
                        .then(({ data }) => {
                            console.log(data);
                            if (data.msg) {
                                this.$notify({
                                    title: data.msg,
                                    message: data.detail,
                                    type: 'error' // å¯ä»¥æ˜¯ 'success', 'warning', 'info', 'error'
                                });
                            } else {
                                this.$notify({
                                    title: 'æ›´æ–°æˆåŠŸ',
                                    message: 'è¯·æ±‚æ•°æ®å·²æ›´æ–°è‡³æœåŠ¡å™¨',
                                    type: 'success' // å¯ä»¥æ˜¯ 'success', 'warning', 'info', 'error'
                                });
                            }
                        })
                        .catch(function (error) {
                            console.log(error);
                        });
                }

            }
        }
        var Vue = Vue.extend(Main);

        new Vue().$mount("#app");

    </script>
</body>

</html>